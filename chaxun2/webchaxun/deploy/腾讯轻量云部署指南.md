# WebæŸ¥è¯¢ç³»ç»Ÿ - è…¾è®¯è½»é‡äº‘å¹¿ä¸œåŒºéƒ¨ç½²æŒ‡å—

## ðŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. è´­ä¹°è…¾è®¯è½»é‡äº‘æœåŠ¡å™¨

#### æŽ¨èé…ç½®
- **åœ°åŸŸ**: ä¸­å›½å¤§é™† - å¹¿å·ž
- **å®žä¾‹**: 2æ ¸2G (é€‚åˆä¸­å°åž‹åº”ç”¨)
- **ç³»ç»Ÿé•œåƒ**: Ubuntu 22.04 LTS
- **å­˜å‚¨**: 20GB SSD
- **å¸¦å®½**: 3Mbps
- **ä»·æ ¼**: çº¦50å…ƒ/æœˆ

#### è´­ä¹°é“¾æŽ¥
1. è®¿é—®: https://cloud.tencent.com/product/lighthouse
2. é€‰æ‹©åœ°åŸŸ: å¹¿å·ž
3. é€‰æ‹©é…ç½®: 2æ ¸2G Ubuntu 22.04
4. è®¾ç½®å¯†ç å¹¶è´­ä¹°

### 2. è¿žæŽ¥åˆ°æœåŠ¡å™¨

```bash
# é€šè¿‡SSHè¿žæŽ¥ï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„å®žé™…IPï¼‰
ssh root@YOUR_SERVER_IP

# é¦–æ¬¡è¿žæŽ¥æ—¶æŽ¥å—ä¸»æœºå¯†é’¥ï¼Œç„¶åŽè¾“å…¥å¯†ç 
```

### 3. ä¸€é”®éƒ¨ç½²WebæŸ¥è¯¢ç³»ç»Ÿ

```bash
# ä¸‹è½½éƒ¨ç½²è„šæœ¬
wget https://raw.githubusercontent.com/qdmz/webchaxun/main/deploy/deploy.sh

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬ï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„åŸŸåå’Œé‚®ç®±ï¼‰
./deploy.sh your-domain.com admin@example.com
```

### 4. åŸŸåè§£æžï¼ˆå¯é€‰ï¼‰

å¦‚æžœæ‚¨æœ‰åŸŸåï¼Œéœ€è¦è§£æžåˆ°æœåŠ¡å™¨ï¼š
1. ç™»å½•è…¾è®¯äº‘æŽ§åˆ¶å°
2. è¿›å…¥DNSPodè§£æž
3. æ·»åŠ Aè®°å½•ï¼š
   - ä¸»æœºè®°å½•ï¼š@ æˆ– www
   - è®°å½•å€¼ï¼šæ‚¨çš„æœåŠ¡å™¨å…¬ç½‘IP
   - TTLï¼š600

### 5. è®¿é—®ç³»ç»Ÿ

éƒ¨ç½²å®ŒæˆåŽï¼š
- **IPè®¿é—®**: http://YOUR_SERVER_IP
- **åŸŸåè®¿é—®**: http://your-domain.com
- **HTTPSè®¿é—®**: https://your-domain.com (å¦‚æžœé…ç½®äº†SSL)

## ðŸ“‹ è¯¦ç»†éƒ¨ç½²è¿‡ç¨‹

### æ­¥éª¤1: å‡†å¤‡æœåŠ¡å™¨

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…åŸºç¡€å·¥å…·
sudo apt install -y git curl wget htop

# è®¾ç½®æ—¶åŒº
sudo timedatectl set-timezone Asia/Shanghai
```

### æ­¥éª¤2: è¿è¡Œè‡ªåŠ¨éƒ¨ç½²

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
cd /var/www
sudo git clone https://github.com/qdmz/webchaxun.git
sudo chown -R $USER:$USER webchaxun
cd webchaxun/deploy

# æ‰§è¡Œéƒ¨ç½²
./deploy.sh your-domain.com admin@example.com
```

### æ­¥éª¤3: éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status webchaxun
sudo systemctl status nginx

# æ£€æŸ¥ç«¯å£ç›‘å¬
sudo netstat -tlnp | grep -E ':(80|443|8000)'

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u webchaxun -n 20
```

## ðŸ”§ æ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰

å¦‚æžœè‡ªåŠ¨è„šæœ¬å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨éƒ¨ç½²ï¼š

### 1. å®‰è£…ä¾èµ–

```bash
sudo apt update
sudo apt install -y python3 python3-pip python3-venv git nginx python3-certbot-nginx

# åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /var/www/webchaxun
cd /var/www/webchaxun
sudo chown $USER:$USER .
```

### 2. éƒ¨ç½²åº”ç”¨

```bash
# å…‹éš†ä»£ç 
git clone https://github.com/qdmz/webchaxun.git .

# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…Pythonä¾èµ–
pip install --upgrade pip
pip install -r requirements.txt

# é…ç½®çŽ¯å¢ƒ
cp .env.example .env
nano .env  # ç¼–è¾‘é…ç½®

# åˆå§‹åŒ–åº”ç”¨
python install.py
```

### 3. é…ç½®æœåŠ¡

```bash
# é…ç½®systemdæœåŠ¡
sudo tee /etc/systemd/system/webchaxun.service > /dev/null <<EOF
[Unit]
Description=WebæŸ¥è¯¢ç³»ç»Ÿ
After=network.target

[Service]
Type=exec
User=www-data
Group=www-data
WorkingDirectory=/var/www/webchaxun
Environment=PATH=/var/www/webchaxun/venv/bin
Environment=FLASK_ENV=production
ExecStart=/var/www/webchaxun/venv/bin/gunicorn -w 4 -b 127.0.0.1:8000 --timeout 120 run:app
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# é…ç½®Nginx
sudo tee /etc/nginx/sites-available/webchaxun > /dev/null <<EOF
server {
    listen 80;
    server_name _;
    
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host \$host;
        proxy_set_header X-Real-IP \$remote_addr;
        proxy_set_header X-Forwarded-For \$proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto \$scheme;
    }
    
    location /static {
        alias /var/www/webchaxun/static;
        expires 1y;
    }
    
    location /uploads {
        alias /var/www/webchaxun/uploads;
        expires 1y;
    }
}
EOF

# å¯ç”¨ç«™ç‚¹
sudo ln -sf /etc/nginx/sites-available/webchaxun /etc/nginx/sites-enabled/
sudo rm -f /etc/nginx/sites-enabled/default
sudo nginx -t

# å¯åŠ¨æœåŠ¡
sudo systemctl enable webchaxun
sudo systemctl start webchaxun
sudo systemctl restart nginx
```

### 4. é…ç½®é˜²ç«å¢™

```bash
# é…ç½®é˜²ç«å¢™
sudo ufw enable
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
```

## ðŸŒ è®¿é—®é“¾æŽ¥

éƒ¨ç½²å®ŒæˆåŽï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æŽ¥è®¿é—®ï¼š

### æœåŠ¡å™¨IPè®¿é—®
```
http://YOUR_SERVER_IP
```

### å¦‚æžœé…ç½®äº†åŸŸå
```
http://your-domain.com
https://your-domain.com  (SSLé…ç½®åŽ)
```

### ç®¡ç†å‘˜ç™»å½•
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`
- **è¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼**

## ðŸ” éƒ¨ç½²éªŒè¯æ¸…å•

### æ£€æŸ¥é¡¹ç›®

- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] ç®¡ç†å‘˜å¯ä»¥ç™»å½•
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸
- [ ] SSLè¯ä¹¦æ­£å¸¸ï¼ˆå¦‚æžœé…ç½®ï¼‰

### æœåŠ¡æ£€æŸ¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status webchaxun
sudo systemctl status nginx

# æ£€æŸ¥ç«¯å£
sudo ss -tlnp | grep -E ':(80|443|8000)'

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep gunicorn
ps aux | grep nginx
```

## ðŸ› ï¸ å¸¸è§é—®é¢˜è§£å†³

### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo lsof -i :80
sudo lsof -i :443

# åœæ­¢å ç”¨æœåŠ¡
sudo systemctl stop apache2  # å¦‚æžœæœ‰Apache
```

### 2. æƒé™é—®é¢˜
```bash
# ä¿®å¤æ–‡ä»¶æƒé™
sudo chown -R www-data:www-data /var/www/webchaxun/uploads
sudo chmod -R 755 /var/www/webchaxun/uploads
```

### 3. Nginxé…ç½®é”™è¯¯
```bash
# æµ‹è¯•é…ç½®
sudo nginx -t

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log
```

### 4. é˜²ç«å¢™é—®é¢˜
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# å¼€æ”¾ç«¯å£
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
```

## ðŸ“ž è…¾è®¯äº‘æ”¯æŒ

å¦‚æžœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°è…¾è®¯äº‘ç›¸å…³çš„é—®é¢˜ï¼š

1. **æŽ§åˆ¶å°**: https://console.cloud.tencent.com/
2. **æ–‡æ¡£**: https://cloud.tencent.com/document/product/1207
3. **å·¥å•**: æäº¤è…¾è®¯äº‘å·¥å•
4. **ç¤¾åŒº**: https://cloud.tencent.com/developer

## ðŸŽ¯ ä¸‹ä¸€æ­¥æ“ä½œ

éƒ¨ç½²å®ŒæˆåŽå»ºè®®ï¼š

1. **ä¿®æ”¹ç®¡ç†å‘˜å¯†ç **
2. **é…ç½®åŸŸåå’ŒSSL**
3. **è®¾ç½®è‡ªåŠ¨å¤‡ä»½**
4. **é…ç½®ç›‘æŽ§å‘Šè­¦**
5. **ä¼˜åŒ–æ€§èƒ½è®¾ç½®**

## ðŸ“Š è®¿é—®é“¾æŽ¥èŽ·å–

### å¦‚ä½•èŽ·å–æœåŠ¡å™¨IP

1. ç™»å½•è…¾è®¯äº‘æŽ§åˆ¶å°
2. è¿›å…¥è½»é‡åº”ç”¨æœåŠ¡å™¨
3. æŸ¥çœ‹æœåŠ¡å™¨è¯¦æƒ…
4. å¤åˆ¶å…¬ç½‘IPåœ°å€

### è®¿é—®é“¾æŽ¥æ ¼å¼

```
http://[æ‚¨çš„æœåŠ¡å™¨IP]
ç¤ºä¾‹: http://123.456.78.90
```

å¦‚æžœæ‚¨éœ€è¦æˆ‘å¸®æ‚¨èŽ·å–å…·ä½“çš„è®¿é—®é“¾æŽ¥ï¼Œè¯·æä¾›ï¼š
- æœåŠ¡å™¨å…¬ç½‘IPåœ°å€
- æˆ–åŸŸåï¼ˆå¦‚æžœå·²é…ç½®ï¼‰

---

**å¿«é€Ÿå‘½ä»¤æ±‡æ€»ï¼š**
```bash
# ä¸€é”®éƒ¨ç½²
wget https://raw.githubusercontent.com/qdmz/webchaxun/main/deploy/deploy.sh
chmod +x deploy.sh
./deploy.sh your-domain.com admin@example.com

# è®¿é—®ç³»ç»Ÿ
http://YOUR_SERVER_IP
```